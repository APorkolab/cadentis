import { Injectable } from '@angular/core';
import { Observable, of } from 'rxjs';
import { VerseForm } from '../models/verse-form.model';

@Injectable({
  providedIn: 'root'
})
export class VerseFormService {
  private verseForms = [
    { "formName": "ta láb", "pattern": "-" },
    { "formName": "ti láb", "pattern": "U" },
    { "formName": "jambus láb", "pattern": "U-" },
    { "formName": "trocheus láb", "pattern": "-U" },
    { "formName": "daktilus láb", "pattern": "-UU" },
    { "formName": "anapesztus láb", "pattern": "UU-" },
    { "formName": "spondeusz láb", "pattern": "--" },
    { "formName": "pirrichius láb", "pattern": "UU" },
    { "formName": "molosszus láb", "pattern": "---" },
    { "formName": "tribrachisz láb", "pattern": "UUU" },
    { "formName": "proceleuzmatikus láb (tetrabrachisz)", "pattern": "UUUU" },
    { "formName": "bacchius kolón", "pattern": "U--" },
    { "formName": "palimbacchius kolón", "pattern": "--U" },
    { "formName": "krétikus kolón", "pattern": "-U-" },
    { "formName": "amphibrachisz kolón", "pattern": "U-U" },
    { "formName": "1. paion kolón", "pattern": "-UUU" },
    { "formName": "2. paion kolón", "pattern": "U-UU" },
    { "formName": "3. paion kolón", "pattern": "UU-U" },
    { "formName": "4. paion kolón", "pattern": "UUU-" },
    { "formName": "1. epitritus kolón", "pattern": "U---" },
    { "formName": "2. epitritus kolón", "pattern": "-U--" },
    { "formName": "3. epitritus kolón", "pattern": "--U-" },
    { "formName": "4. epitritus kolón", "pattern": "---U" },
    { "formName": "ionicus a minore kolón", "pattern": "UU--" },
    { "formName": "ionicus a maiore kolón", "pattern": "--UU" },
    { "formName": "choriambus kolón", "pattern": "-UU-" },
    { "formName": "antiszpasztus kolón", "pattern": "U--U" },
    { "formName": "dochmius", "pattern": "?--U-" },
    { "formName": "adóniszi kolón (szapphói 4.)", "pattern": "-UU-?" },
    { "formName": "hipodochmius kolón", "pattern": "-U-U-" },
    { "formName": "fejetlen pherekrateus kolón", "pattern": "?-UU--" },
    { "formName": "ithüphallikus kolón", "pattern": "-U-U--" },
    { "formName": "Maecenas atavis-kolón", "pattern": "---UU-" },
    { "formName": "hémiepesz kolón (pindarikus sor)", "pattern": "-UU-UU-" },
    { "formName": "léküthion kolón", "pattern": "-U-U-U-" },
    { "formName": "téleszilleion kolón", "pattern": "?-UU-U?" },
    { "formName": "fejetlen wilamovitziánus kolón", "pattern": "???-UU-" },
    { "formName": "fejetlen glükóni kolón", "pattern": "?-UU-U-" },
    { "formName": "pherekrateus kolón", "pattern": "??-UU--" },
    { "formName": "wilamovitziánus kolón", "pattern": "????-UU-" },
    { "formName": "proszodiákus kolón", "pattern": "?-UU-UU-" },
    { "formName": "glükóni kolón", "pattern": "??-UU-U-" },
    { "formName": "második glükóni kolón", "pattern": "---UU-U-" },
    { "formName": "hémiepesz kolón2", "pattern": "-UU-UU-?" },
    { "formName": "fejetlen hipponakteus kolón", "pattern": "?-UU-U-?" },
    { "formName": "enaszmonideus kolón", "pattern": "?-UU-UU-?" },
    { "formName": "enoplion kolón", "pattern": "?-UU-UU--" },
    { "formName": "hipponakteus kolón", "pattern": "??-UU-U-?" },
    { "formName": "Enkomiologikon kolón", "pattern": "-UU-UU---U-?" },
    { "formName": "hexameter", "pattern": "-=-=-=-UU-?" },
    { "formName": "pentameter", "pattern": "-=-=--UU-UU?" },
    { "formName": "phalaikoszi", "pattern": "UU-UU-U-U--" },
    { "formName": "hendecasyllabus/B", "pattern": "U--UU-U-U-?" },
    { "formName": "hendecasyllabus/A", "pattern": "-?-UU-U-U-?" },
    { "formName": "choliambus", "pattern": "?-U-?-U-U-U?" },
    { "formName": "francia alexandrin A", "pattern": "-U--U--UU-U-?" },
    { "formName": "francia alexandrin B", "pattern": "U-U------UU?" },
    { "formName": "francia alexandrin C", "pattern": "U---U?U--UU-?" },
    { "formName": "francia alexandrin D", "pattern": "U---U-U--UU?" },
    { "formName": "nib.alex.1.fictive", "pattern": "?-?-U--" },
    { "formName": "szapphói sor", "pattern": "-U---UU-U-?" },
    { "formName": "trimeter iambicus", "pattern": "U-U-U-U-U-U?" },
    { "formName": "trimeter iambicus (alt)", "pattern": "?-U-?-U-?-U-" },
    { "formName": "glykoni1a", "pattern": "-?-UU-U-" },
    { "formName": "glykoni1b", "pattern": "U--UU-U-" },
    { "formName": "glykoni2a", "pattern": "-?-UU-U" },
    { "formName": "glykoni2b", "pattern": "U--UU-U" },
    { "formName": "asklepiadesi A123", "pattern": "---UU--UU-U?" },
    { "formName": "asklepiadesi B4", "pattern": "---UU-U?" },
    { "formName": "asklepiadesi C3", "pattern": "---UU--" },
    { "formName": "asklepiadesi D13", "pattern": "---UU-?" },
    { "formName": "alkaiosi 12", "pattern": "?-U-?-UU-U?" },
    { "formName": "alkaiosi 3", "pattern": "?-U-U-U-?" },
    { "formName": "alkaiosi 4", "pattern": "-UU-UU-U-?" },
    { "formName": "anakreoni 8", "pattern": "UU-U-U-?" },
    { "formName": "anakreoni 7", "pattern": "U-U-U-?" },
    { "formName": "anakreoni 16", "pattern": "UU--UU--UU--UU--" },
    { "formName": "Szept_vegen1", "pattern": "?-UU-UU-UU-?" },
    { "formName": "Szept_vegen2", "pattern": "?-UU-UU-UU?" },
    { "formName": "epikus hexameter", "pattern": "-U-U-U-U-UU-" },
    { "formName": "trochaikus tetrameter catalecticus", "pattern": "-U-U-U-U-" },
    { "formName": "asclepiadeus minor", "pattern": "-UU-U-UU-U-" },
    { "formName": "elegiákos distichon", "pattern": "-U-U-U-U-UU-/UU-U-UU-" },
    { "formName": "sapphicus minor", "pattern": "-U---UU-U-" },
    { "formName": "anacreonticus", "pattern": "U-U--UU-U" },
    { "formName": "iambikus tetrameter", "pattern": "U-U-U-U-U-U-U-U" },
    { "formName": "alcaicus", "pattern": "-U--U-U--UU-U" },
    { "formName": "amphibrachikus pentameter", "pattern": "U-U-U-U-U-" },
    { "formName": "logaoedikus sor", "pattern": "-UU-UU-U-U-" },
    { "formName": "elegiákos pentameter", "pattern": "UU-U-UU-UU" },
    {
      "formName": "choriambikus tetrameter (vagy értelemtől függően pentameter)",
      "pattern": "-UU--UU--UU--UU-"
    },
    { "formName": "hipponaktikus trimeter", "pattern": "-U-UU-UU-UU-" },
    { "formName": "glykoni", "pattern": "-U-U-U-U" },
    { "formName": "alcaikus sor", "pattern": "U-U--U-U-U-" },
    { "formName": "hemiambus", "pattern": "U--U-" },
    { "formName": "feminine dactylic hexameter", "pattern": "-UU-UU-UU-UU-UU-" },
    { "formName": "trochaikus hexameter", "pattern": "-U-U-U-U-U-U-" },
    { "formName": "adóniszi sor", "pattern": "-UU-U" },
    { "formName": "aszkelpiádészi strófa E", "pattern": "---UU--UU--UU-U?" },
    { "formName": "asynartetus", "pattern": "-U-UUU--" },
    { "formName": "trochaikus pentameter", "pattern": "-U-U-U-U-U-U" },
    { "formName": "iambikus pentameter", "pattern": "U-U-U-U-U-U" },
    { "formName": "alkaiosi pentameter", "pattern": "?-U-?-UU-U-?" },
    { "formName": "glykoni sor", "pattern": "-U-UU-" },
    { "formName": "alkaiosi asclepiadeusi sor", "pattern": "-U---UU-U-U--" },
    { "formName": "spondeikus hexameter", "pattern": "--U-U--UU-" },
    { "formName": "sappho pentameter", "pattern": "U---UU--UU--U" },
    { "formName": "trochaikus heptameter", "pattern": "-U-U-U-U-U-U-U-" },
    { "formName": "iambikus heptameter", "pattern": "U-U-U-U-U-U-U-" },
    { "formName": "fennecikus kolón", "pattern": "UU-U-U" },
    { "formName": "iszkhiatikus kolón", "pattern": "--UU-U" },
    { "formName": "nekrofilikus sor", "pattern": "-UUU-" },
    { "formName": "hipponaktikus kolón", "pattern": "-UU-UU-U" },
    { "formName": "hémiamfibrachikus sor", "pattern": "UU-UU-UU-" },
    { "formName": "proszódikus kolón", "pattern": "-U--U-" },
    { "formName": "fennecikus pentameter", "pattern": "-U-UU-U" },
    { "formName": "ithyphallicos", "pattern": "--UU--U" },
    { "formName": "priapeus", "pattern": "--UU-UU-U" },
    { "formName": "sotadeus", "pattern": "--UU--U-U-" },
    { "formName": "falcidius", "pattern": "-U-UU-UU-UU-U" },
    { "formName": "verslab_trochaeus_dactylos", "pattern": "U-UU--" },
    { "formName": "hipponaktikus_tetrameter", "pattern": "U-UU-UU-UU-U" },
    { "formName": "epic_amfibrakis_sor", "pattern": "U--UU--" },
    { "formName": "adoniszi_varians", "pattern": "UU-U--" },
    { "formName": "anacreontikus_tetrameter", "pattern": "U-UU-UU-U" },
    { "formName": "elegiakos_trimeter", "pattern": "U-U--UU--U" },
    { "formName": "anacreonticus_hexameter", "pattern": "U-UU-U-UU-UU-" },
    { "formName": "hemichoriambus", "pattern": "-UU--" },
    { "formName": "dochmiac kolón", "pattern": "U-UU-" },
    { "formName": "alcmani kolón", "pattern": "-UUU--" },
    { "formName": "pherekrateus II", "pattern": "-UU--U" },
    { "formName": "hippophorikus kolón", "pattern": "UUU--UU" },
    { "formName": "scazon choliambus", "pattern": "U-U-U-U-U-UU" },
    { "formName": "bacchius maior", "pattern": "--U-U" },
    { "formName": "phalaecius kolón", "pattern": "-UU-U-UU-" },
    { "formName": "alkaioszi pentameter", "pattern": "-U-UU-U-UU-" },
    { "formName": "hypodochmius", "pattern": "U--UU-" },
    { "formName": "asztrofikus kolón", "pattern": "-UU--UUU-" },
    { "formName": "alkaioszi asztrofikus sor", "pattern": "-U-UU-U--UU" },
    { "formName": "szimmetrikus diambikus", "pattern": "U-U-U-U" },
    { "formName": "katalektikus hexameter", "pattern": "-U-U-U-U-U-" },
    {
      "formName": "holodaktilikus hexameter (daktilikus pentapodia)",
      "pattern": "-UU-UU-UU-UU-"
    },
    { "formName": "creticus minor", "pattern": "U-U-" },
    { "formName": "galliambus", "pattern": "UU--UU--UU--UU" },
    { "formName": "versláb leptorrhaphisz", "pattern": "UU-UUU-" },
    { "formName": "kolón anaklázis", "pattern": "UU--UU-" },
    { "formName": "ionikus pentameter", "pattern": "--UU--UU" },
    { "formName": "tetrakolon", "pattern": "-U--U--U-" },
    { "formName": "prosodiacus maior", "pattern": "UU-UU-" },
    { "formName": "aszklepiadeus minor", "pattern": "-U-UU--UU" },
    { "formName": "epitritosz pentameter", "pattern": "--U--U--U-" },
    { "formName": "epitritos hexameter", "pattern": "--U-U--U-U-" },
    { "formName": "proszodiakosz hexameter", "pattern": "-UU--UU--U" },
    { "formName": "hyperchoriambus", "pattern": "-UU--UU-" },
    { "formName": "versláb eolosz kolón", "pattern": "UU--UU" },
    { "formName": "hippius", "pattern": "UU-UU" },
    { "formName": "ferecrateus minor", "pattern": "-UU-U-" },
    { "formName": "sotadicus choliambus", "pattern": "--UU-UU-" },
    { "formName": "epodikus hexameter", "pattern": "-U-U--UU--U" },
    { "formName": "hipponaktikus catalecticus", "pattern": "-U-UU-UU-" },
    { "formName": "ionikus tetrameter (enoplion)", "pattern": "--UU--UU--" },
    { "formName": "versláb trochaikus dipódia", "pattern": "-U-U" },
    { "formName": "anacreoni sor variáns", "pattern": "UU--UU-U" },
    { "formName": "hipponaktikus dipódia", "pattern": "-UU--UU" },
    { "formName": "krétikus choriambus", "pattern": "-U--UU-" },
    { "formName": "dionysiakosz hexameter", "pattern": "UU-UU-UU--UU" },
    { "formName": "hyperionikus kolón", "pattern": "UU--UU--UU" },
    { "formName": "ionicus tetrameter catalecticus", "pattern": "--UU--UU-" },
    { "formName": "versláb spondeikus pentapodia", "pattern": "--U--U--U--" },
    { "formName": "aszklepiádészi hexameter", "pattern": "-UU-U-UU--UU-U" },
    { "formName": "iambikus dipódia", "pattern": "U-U-U-" },
    {
      "formName": "choriambikus hexapodia",
      "pattern": "-UU--UU--UU--UU--UU--UU"
    },
    { "formName": "krétikus pentapodia", "pattern": "-U--U--U--U-" },
    { "formName": "asklepiadesi tetrapodia", "pattern": "-UU--UU--UU-U" },
    { "formName": "molosszikus tetrapodia", "pattern": "--- --- --- ---" },
    { "formName": "bimakrosz dipodia", "pattern": "- - - -" },
    { "formName": "hippius major", "pattern": "UU--UU--" },
    { "formName": "hippius minor", "pattern": "UU--U" },
    { "formName": "adoneus maximalis", "pattern": "-UU-UU--" },
    { "formName": "epitritos tetrapodia", "pattern": "--U--U--U--U" },
    { "formName": "anapaestikus pentapodia", "pattern": "UU-UU-UU-UU-" },
    { "formName": "dactylicus tetrapodia catalecticus", "pattern": "-UU-UU-UU-" },
    { "formName": "krétikus tetrakolos", "pattern": "-U--U--U--U" },
    { "formName": "gliconius_major", "pattern": "-U-UU-U-U" },
    { "formName": "bacchius tetrapodia", "pattern": "U--U--U--U" },
    { "formName": "amphibrachikus pentapodia", "pattern": "U-U-U-U-U" },
    { "formName": "hippophorikus tetrameter", "pattern": "UUU--UUU--" },
    { "formName": "alcaikus tetrameter", "pattern": "-U--U-U--U-U" },
    { "formName": "prosodiacus pentapodia", "pattern": "-U--U--U--U--U" },
    { "formName": "choriambikus trimeter", "pattern": "-UU--UU--UU-" },
    { "formName": "epic dactylicus tetrapodia", "pattern": "-UU-UU-UU-UU" },
    { "formName": "iambikus hexapodia catalecticus", "pattern": "U-U-U-U-U-U-" },
    { "formName": "spondeikus hexapodia", "pattern": "-- -- -- -- -- --" },
    { "formName": "alkaioszi hendecasyllabus", "pattern": "-U-U--U-U-U-" }
  ];

  constructor() { }

  getVerseForms(): Observable<VerseForm[]> {
    return of(this.verseForms.map(form => ({
      ...form,
      // Kiszámolja a mora-számot úgy, hogy figyelmen kívül hagyja az opcionális, közömbös szótagot (?)
      moraCount: this.calculateMoraCount(form.pattern),
      type: 'versláb' as const
    })));
  }

  // Kiszámítja a mora-számot, figyelembe véve a közömbös utolsó szótagot (?)
  private calculateMoraCount(pattern: string): number {
    const normalizedPattern = pattern.endsWith('?') ? pattern.slice(0, -1) : pattern;  // Közömbös utolsó szótag eltávolítása, ha van
    return normalizedPattern.split('').filter(char => char !== ' ').length;
  }
}
